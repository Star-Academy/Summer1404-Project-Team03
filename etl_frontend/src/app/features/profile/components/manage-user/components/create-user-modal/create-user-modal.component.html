<p-dialog
  header="Create User"
  [modal]="true"
  [visible]="visible()"
  [draggable]="false"
  (onHide)="onClose()"
>
  <form [formGroup]="userForm" (ngSubmit)="onCreateUser()" novalidate>
    <div class="modal">
      <div class="modal__inputs">
        <div class="modal__input">
          <label for="username">Username</label>
          <input
            pInputText
            type="text"
            id="username"
            placeholder="Enter username"
            formControlName="username"
          />
          <div
            *ngIf="
              f['username'].invalid &&
              (f['username'].dirty || f['username'].touched)
            "
            class="p-error text-xs mt-1"
          >
            <small *ngIf="f['username'].errors?.['required']"
              >Username is required.</small
            >
          </div>
        </div>

        <div class="modal__input">
          <label for="email">Email</label>
          <input
            pInputText
            type="email"
            id="email"
            placeholder="Enter email"
            formControlName="email"
          />
          <div
            *ngIf="
              f['email'].invalid && (f['email'].dirty || f['email'].touched)
            "
            class="p-error text-xs mt-1"
          >
            <small *ngIf="f['email'].errors?.['required']"
              >Email is required.</small
            >
            <small *ngIf="f['email'].errors?.['email']"
              >Please enter a valid email address.</small
            >
          </div>
        </div>

        <div class="modal__input">
          <label for="firstName">First Name</label>
          <input
            pInputText
            type="text"
            id="firstName"
            placeholder="Enter first name"
            formControlName="firstName"
          />
          <div
            *ngIf="
              f['firstName'].invalid &&
              (f['firstName'].dirty || f['firstName'].touched)
            "
            class="p-error text-xs mt-1"
          >
            <small *ngIf="f['firstName'].errors?.['required']"
              >First name is required.</small
            >
          </div>
        </div>

        <div class="modal__input">
          <label for="lastName">Last Name</label>
          <input
            pInputText
            type="text"
            id="lastName"
            placeholder="Enter last name"
            formControlName="lastName"
          />
          <div
            *ngIf="
              f['lastName'].invalid &&
              (f['lastName'].dirty || f['lastName'].touched)
            "
            class="p-error text-xs mt-1"
          >
            <small *ngIf="f['lastName'].errors?.['required']"
              >Last name is required.</small
            >
          </div>
        </div>

        <div class="modal__input">
          <label for="password">Password</label>
          <input
            pInputText
            type="password"
            id="password"
            placeholder="Enter password"
            formControlName="password"
          />
          <div
            *ngIf="
              f['password'].invalid &&
              (f['password'].dirty || f['password'].touched)
            "
            class="p-error text-xs mt-1"
          >
            <small *ngIf="f['password'].errors?.['required']"
              >Password is required.</small
            >
            <small *ngIf="f['password'].errors?.['minlength']"
              >Password must be at least 8 characters.</small
            >
          </div>
        </div>

        <!-- Uncomment this if you want role select -->
        <!--
        <div class="modal__input">
          <label for="role">Role</label>
          <p-select
            id="role"
            [options]="roles"
            optionLabel="name"
            [showClear]="true"
            placeholder="Select a role"
            class="modal__select"
            [(ngModel)]="selectedRole"
          />
        </div>
        -->
      </div>

      <div class="modal__btn">
        <p-button
          label="Cancel"
          severity="secondary"
          (click)="onClose()"
          rounded
          type="button"
        />
        <p-button
          label="Create User"
          type="submit"
          [disabled]="userForm.invalid"
          rounded
          [loading]="vm().isLoading"
        />
      </div>
    </div>
  </form>
</p-dialog>
